# 数据库重复歌曲清理工具

这个脚本用于清理音乐数据库中的重复歌曲。

## 功能特性

- **智能重复检测**：基于歌曲名称（title）和艺术家（artist）识别重复歌曲
- **安全删除策略**：保留每组重复歌曲中ID最小的记录（即最早添加的记录）
- **预览模式**：默认只预览将要删除的内容，不实际删除
- **详细报告**：显示重复歌曲的详细信息和删除统计

## 使用方法

### 1. 预览模式（默认）
```bash
python remove_duplicates.py
```
只显示重复歌曲信息，不实际删除任何内容。

### 2. 实际删除重复歌曲
```bash
python remove_duplicates.py --confirm
```
实际删除数据库中的重复歌曲。

### 3. 查看重复歌曲详细信息
```bash
python remove_duplicates.py --detail
```
显示所有重复歌曲的详细信息，包括ID、歌曲名、艺术家、专辑、年份等。

### 4. 查看帮助信息
```bash
python remove_duplicates.py --help
```

## 清理结果示例

本次清理前后对比：
- **清理前**：1885 首歌曲
- **发现重复**：267 组重复歌曲
- **删除数量**：1608 首重复歌曲
- **清理后**：277 首歌曲
- **结果**：✅ 无重复歌曲

## 安全说明

1. **数据备份**：建议在运行实际删除前备份数据库文件
2. **预览优先**：总是先运行预览模式确认要删除的内容
3. **保留策略**：脚本会保留每组重复歌曲中最早添加的那一首（ID最小）

## 重复判断标准

两首歌曲被认为是重复的，当且仅当：
- 歌曲名称（title）完全相同
- 艺术家（artist）完全相同

其他字段（专辑、年份、标签等）的差异不影响重复判断。

## 注意事项

- 脚本会自动处理数据库连接，使用项目配置的数据库
- 删除操作不可逆，请谨慎操作
- 清理后建议重新启动应用程序以刷新缓存 